var commit=commit||{};(function($){"use strict";commit.contactinfo={selectors:{form:"#contactinfo",dobPopover:"#dobPopover",dobPopoverContent:"#dobPopoverContent",email:"#email",primaryEmail:"#primaryEmail",emailPopover:"#emailPopover",emailPopoverContent:"#emailPopoverContent",phonePopover:"#phonePopover",phonePopoverContent:"#phonePopoverContent",international:"#internationalNumber"},utils:{},validator:{},phone:{us:{required:!0,phoneCommit:!0},international:{required:!0,phoneIntCommit:!0}},getPhoneType:function(){var international=$(this.selectors.international);return international.is(":checked")?this.phone.international:this.phone.us},validate:function(){var selectors=this.selectors;this.validator=new commit.validator({selectors:selectors,rules:{dob:{required:!0,date:!0},email:{required:!0,email:!0},phoneNumber:{required:!0,phoneCommit:!0}},messages:{dob:{required:"Please enter your date of birth.",date:"Please enter a valid date of birth"},email:{required:"Please enter your email."},phoneNumber:{required:"Please enter your phone number."}}})},onInternationalSelect:function(){var selectors,form,validator,phoneType;selectors=this.selectors,form=$(selectors.form),validator=form.data.validator,phoneType=this.getPhoneType(),form.data().hasOwnProperty("validator")&&(form.data().validator.settings.rules.phoneNumber=phoneType)},initializeViewPopovers:function(){var emailPopover,emailPopoverContent,phonePopover,phonePopoverContent,dobPopover,dobPopoverContent;emailPopover=$(this.selectors.emailPopover),emailPopoverContent=$(this.selectors.emailPopoverContent).html(),phonePopover=$(this.selectors.phonePopover),phonePopoverContent=$(this.selectors.phonePopoverContent).html(),dobPopover=$(this.selectors.dobPopover),dobPopoverContent=$(this.selectors.dobPopoverContent).html(),this.utils.popover(emailPopover,emailPopoverContent),this.utils.popover(dobPopover,dobPopoverContent),this.utils.popover(phonePopover,phonePopoverContent)},attachModalListeners:function(){var email,primaryEmail,dialog;email=$(this.selectors.email),primaryEmail=$(this.selectors.primaryEmail),dialog=this.validator.dialog,dialog.on("show",_.bind(function(){primaryEmail.html($.trim(email.val()))},this)),dialog.on("hidden",_.bind(function(){primaryEmail.html("")},this))},initialize:function(){_.bindAll(this),this.utils=commit.utils,this.initializeViewPopovers(),this.validate()}},commit.contactinfo.initialize()})(jQuery,_);