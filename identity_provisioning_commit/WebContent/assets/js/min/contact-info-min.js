var commit=commit||{};(function($){"use strict";commit.contactinfo={selectors:{form:"#contactinfo",dobControl:"#dobControl",dob:"#dob",dobMonth:"#dob_dateLists_month_list",dobDay:"#dob_dateLists_day_list",dobYear:"#dob_dateLists_year_list",dobPopover:"#dobPopover",dobPopoverContent:"#dobPopoverContent",email:"#email",primaryEmail:"#primaryEmail",emailPopover:"#emailPopover",emailPopoverContent:"#emailPopoverContent",phonePopover:"#phonePopover",phonePopoverContent:"#phonePopoverContent",international:"#internationalNumber"},utils:{},validator:{},phone:{us:{required:!0,phoneCommit:!0},international:{required:!0,phoneIntCommit:!0}},getPhoneType:function(){var international=$(this.selectors.international);return international.is(":checked")?this.phone.international:this.phone.us},validate:function(){var selectors=this.selectors;this.validator=new commit.validator({selectors:selectors,rules:{dob:{required:!0,date:!0},email:{required:!0,email:!0},phoneNumber:{required:!0,phoneCommit:!0}},messages:{dob:{required:"Please enter your date of birth.",date:"Please enter a valid date of birth"},email:{required:"Please enter your email."},phoneNumber:{required:"Please enter your phone number."}},formModal:!0,formPopover:!0,focus:!0,verify:!0})},onInternationalSelect:function(){var selectors,form,validator,phoneType;selectors=this.selectors,form=$(selectors.form),validator=form.data.validator,phoneType=this.getPhoneType(),form.data().hasOwnProperty("validator")&&(form.data().validator.settings.rules.phoneNumber=phoneType)},setYearOnSelect:function(year){var dobYear=$(this.selectors.dobYear);dobYear.val(year)},getYearFromSelect:function(){var dobYear=$(this.selectors.dobYear);return parseInt(dobYear.val(),10)},getDateOfBirth:function(){var dobMonth,dobDay,dobYear;return dobMonth=$(this.selectors.dobMonth),dobDay=$(this.selectors.dobDay),dobYear=$(this.selectors.dobYear),dobMonth.val()+"/"+dobDay.val()+"/"+dobYear.val()},initializeDatepicker:function(){var dob=$(this.selectors.dob),control=$(this.selectors.dobControl),date=new Date,yearEnd=(date.getMonth()+1,date.getDate(),date.getFullYear()-1),yearStart=yearEnd-150;dob.dateDropDowns({dateFormat:"mm/dd/yyyy",monthNames:["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."],yearStart:yearStart,yearEnd:yearEnd}),this.getYearFromSelect()===yearStart&&this.setYearOnSelect(yearEnd),dob.val(this.getDateOfBirth()),control.show()},initializeDatepickerListeners:function(){var dob=$(this.selectors.dob),control=$(this.selectors.dobControl),select=control.find("select");select.on("change",_.bind(function(){dob.val(this.getDateOfBirth()),console.log(dob.val())},this))},initializeViewPopovers:function(){var emailPopover,emailPopoverContent,phonePopover,phonePopoverContent,dobPopover,dobPopoverContent;emailPopover=$(this.selectors.emailPopover),emailPopoverContent=$(this.selectors.emailPopoverContent).html(),phonePopover=$(this.selectors.phonePopover),phonePopoverContent=$(this.selectors.phonePopoverContent).html(),dobPopover=$(this.selectors.dobPopover),dobPopoverContent=$(this.selectors.dobPopoverContent).html(),this.utils.popover(emailPopover,emailPopoverContent),this.utils.popover(dobPopover,dobPopoverContent),this.utils.popover(phonePopover,phonePopoverContent)},attachModalListeners:function(){var email,primaryEmail,dialog;email=$(this.selectors.email),primaryEmail=$(this.selectors.primaryEmail),dialog=this.validator.dialog,dialog.on("show",_.bind(function(){primaryEmail.html($.trim(email.val()))},this)),dialog.on("hidden",_.bind(function(){primaryEmail.html("")},this))},initialize:function(){_.bindAll(this),this.utils=commit.utils,this.initializeDatepicker(),this.initializeDatepickerListeners(),this.initializeViewPopovers(),this.validate(),this.attachModalListeners()}},commit.contactinfo.initialize()})(jQuery);