var commit=commit||{};(function($){"use strict";commit.currentaddress={selectors:{form:"#address",country:"#country",state:"#state",province:"#province",zip:"#postalCode",controlGroup:".control-group",helpInline:".help-inline"},utils:{},validator:{},validate:function(){var selectors=this.selectors;this.validator=new commit.validator({selectors:selectors,rules:{addressLine1:{required:!0},city:{required:!0},state:{required:!0},province:{required:!0},postalCode:{required:!0,postalCodeCommit:!0}},messages:{addressLine1:{required:"Please enter your address."},city:{required:"Please enter your city."},state:{required:"Please select a state."},province:{required:"Please enter a province."},postalCode:{required:"Please enter a zip code."}},formPopover:!0,focus:!0,verify:!0})},toggleCountryControls:function(options){var country,state,province,stateGroup,provinceGroup;options=options&&options.hasOwnProperty("clear")?options:{clear:!1},country=this.utils.lowerCase($.trim($(this.selectors.country).val())),state=$(this.selectors.state),province=$(this.selectors.province),stateGroup=state.closest(this.selectors.controlGroup),provinceGroup=province.closest(this.selectors.controlGroup),stateGroup.hide(),provinceGroup.hide(),"can"===country?(options.clear&&(this.utils.resetSelect(state),this.utils.resetInput(province)),provinceGroup.show()):"usa"===country?(options.clear&&(this.utils.resetSelect(state),this.utils.resetInput(province)),stateGroup.show()):(provinceGroup.hide(),stateGroup.hide())},togglePostalValidation:function(options){var country,zip,control;options=options&&options.hasOwnProperty("clear")?options:{clear:!1},country=this.utils.lowerCase($.trim($(this.selectors.country).val())),zip=$(this.selectors.zip),control=zip.closest(this.selectors.controlGroup),"usa"===country?(options.clear&&this.utils.resetInput(zip),zip.rules("add",{required:!0,postalCodeCommit:!0})):(options.clear&&this.utils.resetInput(zip),zip.rules("remove"),control.removeClass("error"),control.find(".help-block").hide())},onCountryChange:function(){this.toggleCountryControls({clear:!0}),this.togglePostalValidation({clear:!0})},initialize:function(){_.bindAll(this),this.utils=commit.utils,this.validate(),this.toggleCountryControls(),this.togglePostalValidation()}},commit.currentaddress.initialize()})(jQuery);